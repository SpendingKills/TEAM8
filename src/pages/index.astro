---
import PageLayout from "../layouts/PageLayout.astro";
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";

const url = "https://gdawlsaoddfuwhyjjcjf.supabase.co/rest/v1/forbrug";
const key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdkYXdsc2FvZGRmdXdoeWpqY2pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NTg1MDksImV4cCI6MjA4MTUzNDUwOX0.lB_NHH7Dy3hCjtvSWVWvLYE5HFJZvsyK0Rs33w6g3ng";

const options = {
  headers: {
    apikey: key,
  },
};
const supaRequset = await fetch(url, options);
const supaData = await supaRequset.json();
---

<PageLayout>
  <div class="SK_intro">
    <h1><b>Forbruger du mere, end du tror?</b></h1>
    <section class="grid_1-1-1">
      <div>
        <h1>Planlæg, tænk dig om, og invester i det, der virkelig betyder noget.</h1>
      </div>

      <div class="billede_card">
        <img src="/notchbillede1.webP" alt="kampagnebillede1" />
        <div class="overlay_content">
          <h3><b>Kampagne 1</b></h3>
          <a href="/spending_kills">
            <Button variant="tertiary"><img src="/button-pil.svg" alt="" /></Button>
          </a>
        </div>
      </div>

      <div class="billede_card">
        <img src="/notchbillede2.webP" alt="kampagnebillede2" />
        <div class="overlay_content">
          <h3><b>Kampagne 2</b></h3>
          <a href="/AO">
            <Button variant="tertiary"><img src="/button-pil.svg" alt="" /></Button>
          </a>
        </div>
      </div>
    </section>

    <div class="video_card">
      <div class="overlay_video">
        <h4><b>Så meget forbruger du?</b></h4>
      </div>

      <video width=" 100" height="auto" autoplay muted loop playsinline controls>
        <source src="/FORSIDEVIDEO(1).mp4" type="video/mp4" />
        Din browser understøtter ikke video-tagget.
      </video>
      <div class="overlay_button">
        <Button variant="primary">SE DIT FORBRUG </Button>
      </div>
    </div>

    <h4 class="SK_intro">Hvad for en type er du?</h4>
    <section class="grid_1-1-1_index">
      {
        supaData.map((forbrug, i) => {
          return <Card variant="type-knap" data={forbrug} />;
        })
      }
    </section>
  </div>
</PageLayout>
